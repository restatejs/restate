!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Restate=t():(e.Restate=e.Restate||{},e.Restate.vue=t())}(this,(function(){return(()=>{"use strict";var e={578:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Restate=void 0;t.Restate=class{constructor(e,t){this.httpClient=e,this.store=t,this.$models=new Map}get(e){return this.$models.get(e)}entries(){return this.$models.entries()}set(e,t){return this.$models.set(e,t),this}has(e){return this.$models.has(e)}delete(e){return this.$models.delete(e)}clear(){return this.$models.clear()}}},67:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createRestate=t.$restate=void 0;const r=s(578);t.$restate={},t.createRestate=function(e){return t.$restate.instance=new r.Restate(e.httpClient,e.store),t.$restate.instance}},383:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AxiosHTTPClient=void 0;t.AxiosHTTPClient=class{constructor(e){this.axios=e}async get(e){return(await this.axios.get(e)).data}async post(e,t){return(await this.axios.post(e,t)).data}async put(e,t){await this.axios.put(e,t)}async delete(e){await this.axios.delete(e)}}},774:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VueStore=void 0;const r=s(734),o=s(816);t.VueStore=class{constructor(){this.resources=new Map,this.store=(0,r.reactive)({})}get(e){return this.resources.get(e)}add(e){const t=new o.VueStoreResource(e,this.store);return this.resources.set(e,t),t}has(e){return this.resources.has(e)}delete(e){return delete this.store[e],this.resources.delete(e)}clear(){Object.keys(this.store).forEach((e=>delete this.store[e])),this.resources.clear()}}},816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VueStoreResource=void 0;t.VueStoreResource=class{constructor(e,t){this.resourceName=e,this.store=t,e in t||(t[e]={data:{}}),this.state=t[e]}get(e){return this.state.data[e]}getAll(){return Object.values(this.state.data)}set(e,t){return this.state.data[e]=t,this}setProperty(e,t,s){const r=this.state.data[e];return r&&Reflect.set(r,t,s),this}has(e){return e in this.state.data}delete(e){delete this.state.data[e]}clear(){this.state.data={}}}},560:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModel=void 0;const r=s(93);function o(e,t,s){let r=e.replace(/(\/:\w+)/g,(e=>{const s=e.slice(2);if(!t[s])throw new Error;return`/${t[s]}`}));return s&&(r+=`?${new URLSearchParams(s)}`),r}class a extends r.CoreModel{constructor(e,t){super(e,t),this.$resourceName=e,this.$restate=t,this.$pk="id"}async index(e){const t=o("/:resourceName",{resourceName:this.$resourceName},e?.query),s=await this.$httpClient.get(t);return!0!==e?.merge&&this.$resource.clear(),s.forEach((e=>this.$resource.set(e[this.$pk],e))),this.$resource.getAll()}async show(e,t){const s=o("/:resourceName/:id",{resourceName:this.$resourceName,id:e},t?.query),r=await this.$httpClient.get(s);return this.$resource.set(r[this.$pk],r),this.$resource.get(e)}async store(e,t){const s=o("/:resourceName",{resourceName:this.$resourceName},t?.query),r=await this.$httpClient.post(s,e);return this.$resource.set(r[this.$pk],r),!0}async update(e,t,s){const r=o("/:resourceName/:id",{resourceName:this.$resourceName,id:e},s?.query);return await this.$httpClient.put(r,t),Object.entries(t).forEach((([t,s])=>this.$resource.setProperty(e,t,s))),!0}async destroy(e,t){const s=o("/:resourceName/:id",{resourceName:this.$resourceName,id:e},t?.query);return await this.$httpClient.delete(s),this.$resource.delete(e),!0}}t.BaseModel=a},93:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreModel=void 0;t.CoreModel=class{constructor(e,t){if(this.$resourceName=e,this.$restate=t,t.has(e))throw new Error(`RESTATE ERROR: there is already a Model that the resource name is '${e}'`);t.set(e,this),this.$httpClient=t.httpClient,this.$restate.store.has(e)?this.$resource=this.$restate.store.get(e):this.$resource=this.$restate.store.add(e)}}},34:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useRestate=void 0;const r=s(67),o=s(560),a=s(127);t.useRestate=function(e){r.$restate.instance||(0,r.createRestate)(a.provider);const t=r.$restate.instance;let s=t.get(e);return s||(s=new o.BaseModel(e,t),t.set(e,s)),s}},27:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});(0,s(752).__exportStar)(s(34),t)},127:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.provider=void 0;const r=(0,s(752).__importDefault)(s(167)),o=s(383),a=s(774),i=new o.AxiosHTTPClient(r.default),u=new a.VueStore;t.provider={httpClient:i,store:u}},167:e=>{e.exports=require("axios")},752:e=>{e.exports=require("tslib")},734:e=>{e.exports=require("vue")}},t={};var s=function s(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}(27);return s})()}));
//# sourceMappingURL=vue.js.map