!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Restate=t():(e.Restate=e.Restate||{},e.Restate.baseModel=t())}(this,(function(){return(()=>{"use strict";var e,t={560:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModel=void 0;const s=r(93);function o(e,t,r){let s=e.replace(/(\/:\w+)/g,(e=>{const r=e.slice(2);if(!t[r])throw new Error;return`/${t[r]}`}));return r&&(s+=`?${new URLSearchParams(r)}`),s}class i extends s.CoreModel{constructor(e,t){super(e,t),this.$resourceName=e,this.$restate=t,this.$pk="id"}async index(e){const t=o("/:resourceName",{resourceName:this.$resourceName},e?.query),r=await this.$httpClient.get(t);return!0!==e?.merge&&this.$resource.clear(),r.forEach((e=>this.$resource.set(e[this.$pk],e))),this.$resource.getAll()}async show(e,t){const r=o("/:resourceName/:id",{resourceName:this.$resourceName,id:e},t?.query),s=await this.$httpClient.get(r);return this.$resource.set(s[this.$pk],s),this.$resource.get(e)}async store(e,t){const r=o("/:resourceName",{resourceName:this.$resourceName},t?.query),s=await this.$httpClient.post(r,e);return this.$resource.set(s[this.$pk],s),!0}async update(e,t,r){const s=o("/:resourceName/:id",{resourceName:this.$resourceName,id:e},r?.query);return await this.$httpClient.put(s,t),Object.entries(t).forEach((([t,r])=>this.$resource.setProperty(e,t,r))),!0}async destroy(e,t){const r=o("/:resourceName/:id",{resourceName:this.$resourceName,id:e},t?.query);return await this.$httpClient.delete(r),this.$resource.delete(e),!0}}t.BaseModel=i},93:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreModel=void 0;t.CoreModel=class{constructor(e,t){if(this.$resourceName=e,this.$restate=t,t.has(e))throw new Error(`RESTATE ERROR: there is already a Model that the resource name is '${e}'`);t.set(e,this),this.$httpClient=t.httpClient,this.$restate.store.has(e)?this.$resource=this.$restate.store.get(e):this.$resource=this.$restate.store.add(e)}}}},r={};function s(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,s),i.exports}s.m=t,e=[],s.O=(t,r,o,i)=>{if(!r){var a=1/0;for(h=0;h<e.length;h++){for(var[r,o,i]=e[h],c=!0,n=0;n<r.length;n++)(!1&i||a>=i)&&Object.keys(s.O).every((e=>s.O[e](r[n])))?r.splice(n--,1):(c=!1,i<a&&(a=i));if(c){e.splice(h--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var h=e.length;h>0&&e[h-1][2]>i;h--)e[h]=e[h-1];e[h]=[r,o,i]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={431:0,608:0};s.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[a,c,n]=r,u=0;if(a.some((t=>0!==e[t]))){for(o in c)s.o(c,o)&&(s.m[o]=c[o]);if(n)var h=n(s)}for(t&&t(r);u<a.length;u++)i=a[u],s.o(e,i)&&e[i]&&e[i][0](),e[a[u]]=0;return s.O(h)},r=this.webpackChunkRestate_name_=this.webpackChunkRestate_name_||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=s(560);return o=s.O(o)})()}));
//# sourceMappingURL=BaseModel.js.map